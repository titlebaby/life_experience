
### 嵌套事务会出现什么问题
### 嵌套事务
1. 外层事务报错，内层事务也不会提交的。
### 事务中使用队列推送要谨慎
1. 因为队列去消费可能不存在，数据还没有写入
2. insert很耗时
3. 事务里面不能使用队列，因为推送了，就不可以回滚了。

### 20201-11-4导入excel 如订单退款
1. 单个表存在重复问题
2. 表中数据导出与数据库中字段类型不匹配，如果为string类型，用int类型，表的数据量大，根本差不多，因为不会走索引
3. 多个表存在重复数据，导致数据被覆盖，就是数据状态扭转一定要在更改前判断，如“成功”终态就不需要变化了
4. 先用多条订单编号写入数据，在用记录id查对应订单，只能查到第一写入的数据。
5. 当检查不出代码逻辑问题，数据状态没有改变，看看是不是数据重复，由4的原因引起的bug

### yii rbac
1. php yii rbac/init-permission 执行是把文件配置的权限，（在数据库没有查到的权限）写到数据库，同时删除缓存。（本地和测环境不一样的redis缓存库，只要在测试环境将没有在数据路的权限，刷入数据库，就会导致本地验证权限的时候，直接读没有删除的本地redis库（没有新的权限列表）则验证不通过。）
2.  php init